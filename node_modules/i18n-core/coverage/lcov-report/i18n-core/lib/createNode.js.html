<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for i18n-core/lib/createNode.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">i18n-core/lib</a> createNode.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">25% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>9/36</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">4.17% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>1/24</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">10% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/10</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">25% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>9/36</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">140x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict'
&nbsp;
function <span class="fstat-no" title="function not covered" >addPrefix </span>(prefix, key) {
<span class="cstat-no" title="statement not covered" >  return key !== null &amp;&amp; key !== undefined ? prefix + key : prefix</span>
}
&nbsp;
var API = {
  get: <span class="fstat-no" title="function not covered" >fu</span>nction (key) {
<span class="cstat-no" title="statement not covered" >    return this.parent.get(addPrefix(this.currentPrefix, key))</span>
  },
  has: function <span class="fstat-no" title="function not covered" >has </span>(key) {
    var value = <span class="cstat-no" title="statement not covered" >this.parent.get(addPrefix(this.currentPrefix, key))</span>
<span class="cstat-no" title="statement not covered" >    return value !== null &amp;&amp; value !== undefined</span>
  },
  translate: <span class="fstat-no" title="function not covered" >fu</span>nction (key, namedValues, args) {
    var prefixed = <span class="cstat-no" title="statement not covered" >addPrefix(this.currentPrefix, key)</span>
<span class="cstat-no" title="statement not covered" >    return this.translator(this.parent.get(prefixed), prefixed, namedValues, args)</span>
  },
  translateFirst: <span class="fstat-no" title="function not covered" >fu</span>nction (keys, fallbackKey, namedValues, args) {
    var keyNo = <span class="cstat-no" title="statement not covered" >0</span>
<span class="cstat-no" title="statement not covered" >    while (keyNo &lt; keys.length) {</span>
      var key = <span class="cstat-no" title="statement not covered" >addPrefix(this.currentPrefix, keys[keyNo])</span>
      var value = <span class="cstat-no" title="statement not covered" >this.parent.get(key)</span>
<span class="cstat-no" title="statement not covered" >      if (value !== null &amp;&amp; value !== undefined) {</span>
<span class="cstat-no" title="statement not covered" >        return this.translator(value, key, namedValues, args)</span>
      }
<span class="cstat-no" title="statement not covered" >      keyNo += 1</span>
    }
<span class="cstat-no" title="statement not covered" >    return this.translator(null, addPrefix(this.currentPrefix, fallbackKey), namedValues, args)</span>
  },
  prefix: <span class="fstat-no" title="function not covered" >fu</span>nction (prefix, allowSubModification) {
<span class="cstat-no" title="statement not covered" >    if (prefix === null || prefix === undefined) {</span>
<span class="cstat-no" title="statement not covered" >      throw new Error('Prefix is not allowed to be null or undefined')</span>
    }
<span class="cstat-no" title="statement not covered" >    return createNode(prefix, this, this.translator, allowSubModification)</span>
  },
  lock: function <span class="fstat-no" title="function not covered" >createClone </span>(lock) {
<span class="cstat-no" title="statement not covered" >    if (lock === undefined || lock) {</span>
      var clone = <span class="cstat-no" title="statement not covered" >createNode(this.currentPrefix, this.parent, this.translator, true)</span>
<span class="cstat-no" title="statement not covered" >      clone.lock(lock)</span>
<span class="cstat-no" title="statement not covered" >      return clone</span>
    }
    // unmodifiable nodes are always not locked
<span class="cstat-no" title="statement not covered" >    return this</span>
  }
}
&nbsp;
function createNode (prefix, parent, translator, allowModification) {
  var node = Object.create(API)
  node.currentPrefix = prefix
  node.parent = parent
  node.translator = translator
  node.absRoot = parent.absRoot
  <span class="missing-if-branch" title="if path not taken" >I</span>if (allowModification) {
<span class="cstat-no" title="statement not covered" >    node.changePrefix = <span class="fstat-no" title="function not covered" >fu</span>nction (newPrefix) {</span>
<span class="cstat-no" title="statement not covered" >      this.currentPrefix = newPrefix</span>
    }
<span class="cstat-no" title="statement not covered" >    node.lock = <span class="fstat-no" title="function not covered" >fu</span>nction (lock) {</span>
<span class="cstat-no" title="statement not covered" >      this.absRoot = lock === undefined || lock ? this : this.parent.absRoot</span>
<span class="cstat-no" title="statement not covered" >      return this</span>
    }
  }
  return node
}
&nbsp;
module.exports = createNode
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Feb 18 2017 04:52:25 GMT+0900 (JST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
